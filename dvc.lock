schema: '2.0'
stages:
  notebooks@preview:
    cmd: "jupyter nbconvert\n  --execute\n  --ExecutePreprocessor.kernel_name=re-nobm-pcc\n\
      \  --to=html\n  --output-dir=docs\n  notebooks/preview.ipynb\n"
    outs:
    - path: docs/preview.html
      md5: b70f16305e2bf4c33afc93eb244f0c34
      size: 5208843
  simulate:
    cmd:
    - mkdir data/rrs_day
    - "srun --job-name=re_nobm_pcc.simulate --output=\"logs/slurm-%x-$j-%3t.out\"\
      \ --ntasks=288 --mem-per-cpu=20480M --exclude=poseidon-compute-13 task python\
      \ -m re_nobm_pcc.simulate\n"
    deps:
    - path: data/nobm_day
      md5: 9b383b92fb1f1e2010e7068c9d63daa9.dir
      size: 717093531650
      nfiles: 6915
    - path: data/oasim_param
      md5: 7bca5ebd633e56bea5f6e6cee4644ea9.dir
      size: 205042
      nfiles: 17
    outs:
    - path: data/rrs_day
      md5: 75e5cf07e9e0b847019259af69b11a6e.dir
      size: 1212237505656
      nfiles: 288
  preprocess:
    cmd: "srun --job-name=re_nobm_pcc.preprocess --output=\"logs/slurm-%x-%j.out\"\
      \ --exclude=poseidon-compute-13 task python -m re_nobm_pcc.simulate\n"
    deps:
    - path: data/rrs_day
      md5: 75e5cf07e9e0b847019259af69b11a6e.dir
      size: 1212237505656
      nfiles: 288
    outs:
    - path: data/rrs_day_tfds
      md5: cb2e137af13962029b11eab0944a7ab0.dir
      size: 522219650687
      nfiles: 1026
