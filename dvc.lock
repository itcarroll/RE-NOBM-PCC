schema: '2.0'
stages:
  preprocess:
    cmd: srun --gres=gpu:1 python -m re_nobm_pcc.preprocess
    deps:
    - path: data/nobm
      md5: 311c67999373af7bcf996c1833ae5dff.dir
      size: 1727710729
      nfiles: 13
    - path: re_nobm_pcc/kit.py
      md5: 99ef1f4ef25197e1c2723c3b7527b31c
      size: 1588
    - path: re_nobm_pcc/preprocess.py
      md5: 8c4e3cc219a2f674503f032ba4ee4e82
      size: 2965
    outs:
    - path: data/sample.nc
      md5: be86867d4c9ad91deb00a12bfaf905de
      size: 2165615
    - path: data/test
      md5: 211a7ae5565d79cf59e3cbbb5462772e.dir
      size: 226777743
      nfiles: 3
    - path: data/train
      md5: 68ac8a8346105999795030dda22028cd.dir
      size: 682500039
      nfiles: 3
    - path: data/validate
      md5: 13110ae58d015a923b1d8b150dadd27e.dir
      size: 227634448
      nfiles: 3
  preview:
    cmd: jupyter nbconvert --execute --no-input --to html --output preview.html notebooks/preview.ipynb
    deps:
    - path: data/nobm
      md5: 311c67999373af7bcf996c1833ae5dff.dir
      size: 1727710729
      nfiles: 13
    - path: notebooks/preview.ipynb
      md5: e9a356e89549c7e472add9da95578e51
      size: 7543543
    - path: re_nobm_pcc/kit.py
      md5: c7a41dca524640c0383d5e8295c6ff4a
      size: 1552
    - path: re_nobm_pcc/preprocess.py
      md5: 87c0c4e17fda701f38da439588ee84ec
      size: 2592
    outs:
    - path: notebooks/preview.html
      md5: 0717431e54023af6ceac5602807dc4a1
      size: 7233222
  learn:
    cmd: srun --gres=gpu:1 python -m re_nobm_pcc.learn
    deps:
    - path: data/test
      md5: 211a7ae5565d79cf59e3cbbb5462772e.dir
      size: 226777743
      nfiles: 3
    - path: data/train
      md5: 68ac8a8346105999795030dda22028cd.dir
      size: 682500039
      nfiles: 3
    - path: data/validate
      md5: 13110ae58d015a923b1d8b150dadd27e.dir
      size: 227634448
      nfiles: 3
    - path: re_nobm_pcc/kit.py
      md5: 99ef1f4ef25197e1c2723c3b7527b31c
      size: 1588
    - path: re_nobm_pcc/learn.py
      md5: a87635e0da5f7b215b4c87045c88c4c2
      size: 4717
    outs:
    - path: data/fit.npz
      md5: 984f27916e6942e49cdd9b387fec6f92
      size: 46432
    - path: data/metrics.json
      md5: 2bdae609750531ce02ded4aa136906b6
      size: 1143
    - path: data/model
      md5: 4231ecc4e93050760d6d4f32aa08a5b5.dir
      size: 1179502
      nfiles: 4
  evaluate:
    cmd: jupyter nbconvert --execute --no-input --to html --output evaluate.html notebooks/evaluate.ipynb
    deps:
    - path: data/fit.npz
      md5: 013e2d4494471a2954bfd2e4b348e243
      size: 5240
    - path: data/metrics.json
      md5: 352254f2836f9545ca38de32ebdadb0c
      size: 780
    - path: data/model
      md5: 77bfedd8ee569630010359751a89653c.dir
      size: 944070
      nfiles: 4
    - path: notebooks/evaluate.ipynb
      md5: 8e5ee098d75dafb46517af1de981a07c
      size: 14184819
    outs:
    - path: notebooks/evaluate.html
      md5: f4edc99ff199c7f65b6482eee6437164
      size: 10879773
