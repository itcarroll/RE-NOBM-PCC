schema: '2.0'
stages:
  preprocess:
    cmd: srun --gres=gpu:1 python -m re_nobm_pcc.preprocess
    deps:
    - path: data/nobm
      md5: 311c67999373af7bcf996c1833ae5dff.dir
      size: 1727710729
      nfiles: 13
    - path: re_nobm_pcc/kit.py
      md5: 99ef1f4ef25197e1c2723c3b7527b31c
      size: 1588
    - path: re_nobm_pcc/preprocess.py
      md5: e3dc452c3b1d6af518d300426ff7d2a1
      size: 2906
    outs:
    - path: data/sample.nc
      md5: 0877533efefbebd604f56cf720b9ecac
      size: 2165615
    - path: data/test
      md5: a439e28c07d703447ae6b1f4acf2b270.dir
      size: 217815641
      nfiles: 3
    - path: data/train
      md5: 283f11f59e065381052c1f709313880a.dir
      size: 655528292
      nfiles: 3
    - path: data/validate
      md5: 4da684f0ac1674dac54054076ddcc40e.dir
      size: 218638488
      nfiles: 3
  preview:
    cmd: jupyter nbconvert --execute --no-input --to html --output preview.html notebooks/preview.ipynb
    deps:
    - path: data/nobm
      md5: 311c67999373af7bcf996c1833ae5dff.dir
      size: 1727710729
      nfiles: 13
    - path: notebooks/preview.ipynb
      md5: e9a356e89549c7e472add9da95578e51
      size: 7543543
    - path: re_nobm_pcc/kit.py
      md5: c7a41dca524640c0383d5e8295c6ff4a
      size: 1552
    - path: re_nobm_pcc/preprocess.py
      md5: 87c0c4e17fda701f38da439588ee84ec
      size: 2592
    outs:
    - path: notebooks/preview.html
      md5: 0717431e54023af6ceac5602807dc4a1
      size: 7233222
  learn:
    cmd: srun --gres=gpu:1 python -m re_nobm_pcc.learn
    deps:
    - path: data/test
      md5: a439e28c07d703447ae6b1f4acf2b270.dir
      size: 217815641
      nfiles: 3
    - path: data/train
      md5: 283f11f59e065381052c1f709313880a.dir
      size: 655528292
      nfiles: 3
    - path: data/validate
      md5: 4da684f0ac1674dac54054076ddcc40e.dir
      size: 218638488
      nfiles: 3
    - path: re_nobm_pcc/kit.py
      md5: 99ef1f4ef25197e1c2723c3b7527b31c
      size: 1588
    - path: re_nobm_pcc/learn.py
      md5: 49d401b41a3b19dc6aeb5567af4931c5
      size: 2988
    outs:
    - path: data/fit.npz
      md5: 31763ef87fbdde34fd0afa86f5baf0fe
      size: 12696
    - path: data/metrics.json
      md5: 697ab817ceab9b5dcf12e7a94bfc963c
      size: 878
    - path: data/model
      md5: 6217497f86bd5b4014ea84e6ec29dc05.dir
      size: 623524
      nfiles: 4
  evaluate:
    cmd: jupyter nbconvert --execute --no-input --to html --output evaluate.html notebooks/evaluate.ipynb
    deps:
    - path: data/fit.npz
      md5: 31763ef87fbdde34fd0afa86f5baf0fe
      size: 12696
    - path: data/metrics.json
      md5: 697ab817ceab9b5dcf12e7a94bfc963c
      size: 878
    - path: data/model
      md5: 6217497f86bd5b4014ea84e6ec29dc05.dir
      size: 623524
      nfiles: 4
    - path: notebooks/evaluate.ipynb
      md5: f6c3834083da7ca0cd95a9448f07748e
      size: 7623682
    outs:
    - path: notebooks/evaluate.html
      md5: 48104d2a94265267afa644e63f3db45d
      size: 4446267
